@import "_calendar_variables";

.#{$namespace}sakai-schedule {
	
	.page-header {
		@include display-flex;
		@include justify-content(space-between);
		@include align-items(flex-end);
	}

	input, textarea{
		max-width: 100%;
	}

	.shorttext label {
		vertical-align: top;
		min-width: 10em;
		@media #{$phone}{
			min-width: 96%;
		}
	}

	.shorttext a{
		overflow-wrap: break-word;
	}

	.shorttext .reqStar + label {
		min-width: 9.4em;
		@media #{$phone}{
			min-width: 96%;
		}
	}

	.itemSummary {
		textarea {
			width: 100%;
		}
		@media #{$phone}{
			th, td.header{
				white-space: initial;
			}
			input[type="text"], textarea {
				width: 100%;
			}
		}
	}

	.sakai-table-toolBar {
		border-bottom: 1px solid $page-header-border-color;
	}
	
	table.calendar {
		table-layout: fixed;
		width: 100%;
		border-collapse: collapse;
		font-size: $default-font-size;
		background-color: $calendar-table-background-color;

		td, th {
			text-align: center;
			border-collapse: collapse;
			
			a {
				color: $link-color;
				text-decoration: none;
				
				&:hover, &:focus {
					text-decoration: underline;
				}
			}
		}
		
		th {
			color: $calendar-column-heading-color;
			font-weight: normal;
			
			.viewLinkControl {
				text-align: left;
			}
		}

		.event {
			background-color: #f9f9f9;

			a {
				overflow-x: hidden;
				white-space: nowrap;
				text-overflow: ellipsis;		// if an event name is too long for the cell
				color: $calendar-event-text-color;
			}
			
			& > .squareCalendarDays {
				margin: -1px;			// to overlap the table's cell default border
				border: 1px solid $calendar-event-border-color;
			}
			
			& .calendarMonthView-date {
				border-bottom: 1px dotted #ccc;		// subtle separator between date and events
				
				@media #{$miniCalendarSize} {
					border-bottom: 0 none;			// hide when table becomes too narrow to display the individual events
				}
			}
		}
		
		&.calWeek {
			.event a {
				white-space: normal;
			}
		}

		.bgActivity {
		    background-color: $calendar-event-background-color;
		    border: 1px double $calendar-event-border-color;

		    a {
				color: $calendar-event-text-color;
			}
		}

		.bgWithoutActivity, .borderGrayYear {
		    background-color: #fff;
		    border: 1px solid $calendar-day-border-color;
		}

		.borderGrayDayWeek {
		    border-collapse: collapse;
			border: 1px solid $calendar-day-border-color;
		}

		.borderGrayBackground {
		    background-color: $calendar-event-background-color;
			border-top: 1px solid $calendar-day-border-color;
			border-right: 1px solid $calendar-day-border-color;
			border-bottom: 0 none;
			border-left: 1px solid $calendar-day-border-color;

			a {
				color: $calendar-event-text-color;
			}
		}

		.borderGrayTodayBgCenter {
		    background-color: $calendar-event-background-color;
		    border-left: 1px solid $calendar-event-border-color;
		    border-right: 1px solid $calendar-event-border-color;
		    border-top: 1px solid $calendar-day-border-color;
		}

		.borderGrayTodayEmptyMiddleBottom {
		    background-color: $calendar-day-background-color;
		    border: 1px solid $calendar-day-border-color;
		}

		.borderGrayTodayEmptyMiddleCenter {
		    background-color: $calendar-day-background-color;
		    border-left: 1px solid $calendar-day-border-color;
		    border-right: 1px solid $calendar-day-border-color;
		    border-top: 1px solid $calendar-day-border-color;
		}

		.borderGrayTodayLeftBottom {
		    border-bottom: 1px solid $calendar-day-border-color;
		    border-left: 1px double $calendar-day-today-border-color;	// using "double" here to resolve the border-collapse conflict
		    border-right: 1px solid $calendar-day-border-color;
		    border-top: 1px solid $calendar-day-border-color;
		}

		.borderGrayTodayLeftCenter {
		    border-left: 1px double $calendar-day-today-border-color;	// using "double" here to resolve the border-collapse conflict
		    border-right: 1px solid $calendar-day-border-color;
		    border-top: 1px double $calendar-day-border-color;
		}

		.borderGrayTodayMiddleCenter {
		    border-left: 1px solid $calendar-day-border-color;
		    border-right: 1px solid $calendar-day-border-color;
		    border-top: 1px solid $calendar-day-border-color;
		}

		.borderGrayTodayRightBottom {
		    border-bottom: 1px solid $calendar-day-border-color;
		    border-left: 1px solid $calendar-day-border-color;
		    border-right: 1px solid $calendar-event-border-color;
		    border-top: 1px solid $calendar-day-border-color;
		}

		.borderGrayTodayRightCenter {
		    border-left: 1px solid $calendar-day-border-color;
		    border-right: 1px solid $calendar-day-today-border-color;
		    border-top: 1px solid $calendar-day-border-color;
		}

		.borderOnlyLeftDay {
		    background-color: $calendar-event-background-color;
		    border-right: 1px solid $calendar-day-border-color;
		}

		.borderOnlyLeft {
		    border-left: 1px solid $calendar-day-border-color;
		}

		.borderToday {
			position: relative;		// for making the cell dimensions match
			background-color: $calendar-day-today-background-color;
			border: 1px double $calendar-day-today-background-color;	// using "double" here to resolve the border-collapse conflict
			
			a {
				color: $calendar-day-today-text-color;
			}
			
			&.event {
				border: 1px double $calendar-today-event-border-color;
				background-color: $calendar-today-event-background-color;
			}
		}

		.borderTodayCenter {
			border-top: 1px solid $calendar-day-border-color;
			border-left: 1px double $calendar-day-today-border-color;	// using "double" here to resolve the border-collapse conflict
			border-right: 1px double $calendar-day-today-border-color;	// using "double" here to resolve the border-collapse conflict
			border-bottom: 1px solid $calendar-day-border-color;
		}

		.borderTodayTop {
		    border-left: 1px double $calendar-day-today-border-color;	// using "double" here to resolve the border-collapse conflict
		    border-right: 1px double $calendar-day-today-border-color;
		    border-top: 1px double $calendar-day-today-border-color;
		}

		.borderTodayWithActivity {
		    background-color: $calendar-today-event-background-color;
		    border: 1px double $calendar-today-event-border-color;	// using "double" here to resolve the border-collapse conflict

		    a {
				color: $calendar-today-event-text-color;
			}
		}

		.borderTodayWithoutActivity {
		    background-color: $calendar-day-today-background-color;
		    border: 1px double $calendar-day-today-border-color;	// using "double" here to resolve the border-collapse conflict

			a {
				color: $calendar-day-today-text-color;
			}
		}

		.borderTopLeft {
		    background-color: $calendar-event-background-color;
		    border-left: 1px solid $calendar-day-border-color;
		    border-right: 1px solid $calendar-day-border-color;
		    border-top: 1px solid $calendar-day-border-color;

		    a {
				color: $calendar-event-text-color;
			}
		}

		.borderTopLeftWhite {
		    border-left: 1px solid $calendar-day-border-color;
		    border-right: 1px solid $calendar-day-border-color;
		    border-top: 1px solid $calendar-day-border-color;
		}

		.borderWhiteYear {
		    background-color: $calendar-event-background-color;
		    border: 1px solid #fff;
		    text-align: center;
		}

		.borderWhite {
		    border-bottom: none;
		    border-left: 1px solid #fff;
		    border-right: 1px solid #fff;
		    border-top: 1px solid #fff;
		}

		.borderGrayTodayCenter, .borderOnlyLeftTodayCenter {
		    border-left: 1px double $calendar-day-today-border-color;	// using "double" here to resolve the border-collapse conflict
		    border-right: 1px solid $calendar-day-today-border-color;
		    border-top: 1px solid $calendar-day-border-color;
		}

		.borderGrayTodayEmptyRightBottom, .borderGrayTodayEmptyRightCenter {
		    background-color: $calendar-table-background-color;
		    border-left: 1px solid $calendar-day-border-color;
		    border-right: 1px solid $calendar-day-today-border-color;
		    border-top: 1px solid $calendar-day-border-color;
			border-bottom: 1px solid $calendar-day-border-color;
		}

		.borderGrayTodayMiddleBottom, .borderFullGray {
		    border: 1px solid $calendar-day-border-color;
		}

		.borderGrayMonth {
			position: relative;		// for making the cell dimensions match below
			width: 14%;				// 100% table width divided evenly by seven days
			border: 1px solid $calendar-day-border-color;
			vertical-align: top;
			
			&:after {
				content:'';
				display: block;
				margin-top: 100%;		// make the cells height match its width
			}
		}

		.borderTodayBottom, .borderGrayTodayBottom, .borderOnlyLeftTodayBottom {
		    border-left: 1px double $calendar-day-today-border-color;	// using "double" here to resolve the border-collapse conflict
		    border-right: 1px double $calendar-day-today-border-color;
			border-top: 1px solid $calendar-event-border-color;
		    border-bottom: 1px double $calendar-day-today-border-color;
		}

		.timeCells {
			width: 5%;
			background: $calendar-event-background-color;
			white-space: nowrap;
			
			@media #{$tablet}{
				width: 10%;		// provide similar pixel width for the text at smaller total widths
			}
			
			@media #{$phone}{
				width: 15%;		// provide similar pixel width for the text at smaller total widths
			}
		}
	}

	table.fieldsTable {
		@media #{$phone}{
			display: inline-table;
			width:100% !important;
		}
	}

	.viewLinkControl {
		margin: $standard-spacing 0;
		
		a {
			@extend .button;
		}
	}

	#calendarForm{
		.sectionContainerNav{
			width: 93% !important;
		}
	}

	.calendarYearContainer {
		margin: $standard-spacing 0 $standard-spacing -#{$standard-spacing};	// to compensate for item padding (added below) to left-align properly
		
		@media #{$tablet} {
			text-align: center;		// center the months for smaller devices when there is only room for fewer month wide
		}
	}

	.calendarYearItem {
		max-width: 23em;
		min-width: 17em;
		display: inline-block;
		padding: $standard-spacing;
		vertical-align: top;		// align all of the calendars to their top row
		
		td {
			text-align: center;
			
			a, &.borderGrayYear {
				line-height: 2;		// make the days square-shaped
			}
			a {
				display: block;		// make the days square-shaped
				padding: 0.5em;
				text-align: center;
			}
		}
	}

	.calendarMonthView-date {
		display: block;
		margin: 0;
		padding: 0 $standard-space;
		text-align: right;
		line-height: 1.5;
	}
	
	.calendarMonthView-event {
		position: absolute;
		top: 1.5em;
		right: 0;
		bottom: 0;
		left: 0;
		padding: $standard-space 0.5em;	// standard-space to match date spacing
		text-align: left;
		white-space: nowrap;
		overflow-x: hidden;
		overflow-y: auto;				// if there are more events than height can show, add scrollbar to the cell
		text-overflow: ellipsis;		// if an event name is too wide for the cell

		@media #{$tablet} {
			padding: 0 $standard-space;	// reduce the amount of space around the event when the table is narrower for smaller screens
		}
		
		@media #{$miniCalendarSize} {
			top: 0;						// give full space for event count when table becomes too narrow to display the individual events
		}
		
		a {
			display: block;
			font-size: 12px;
			line-height: 2;
			
			@media #{$miniCalendarSize} {
				display: none;	// hide events when table becomes too narrow to display these individual events
			}
		}
		
		.eventsPerDay {
			display: none;		// hide event count for most views
			
			@media #{$miniCalendarSize} {
				display: block;	// display event count when table becomes too narrow to display individual events
				position: absolute;
				bottom: 2px;
				left: 2px;
				width: 2em;
				height: 2em;
				border-radius: 1em;
				background-color: #15597e;
				color: #fff !important;
				text-align: center;
			}
		}
	}
	
	.calendar-week td {
		line-height: 2;
	}
	
	.calendarWeekView-event {
		overflow-x: hidden;
		overflow-y: auto;
		max-height: calc((2 * 28px) + (2 * 1px) - 1px);		// (cell line-height times number of rowspan) plus (number of rowspan times border width) minus one extra border
		padding-right: $standard-space;
		padding-left: 18px;
		font-size: 12px;
		line-height: 1.4;
		text-align: left;
		
		a {
			position: relative;
		}
		
		.icon {
			position: absolute;
			top: 2px;
			left: -16px;
		}
	}
	
	.squareCalendarDays {
		position: absolute;
		top: 0;
		right: 0;
		bottom: 0;
		left: 0;
	}
	
	.calendarEventTypesLegend {
		margin: 2em;
		
		h4 {
			margin: 0;
			padding: $standard-spacing;
			border: 1px solid $calendar-day-border-color;
			background-color: $calendar-event-background-color;
			text-align: center;
		}
		
		.calendarLegend {
			@include display-flex;
			@include flex-wrap(wrap);
			margin: 0;
			padding: $standard-spacing;
			
			li {
				@include display-flex;
				@include align-items(center);
				width: 200px;
				min-height: 2em;				// accommodates line wrapping within individual list items
				margin: $standard-spacing;
				line-height: 1;
			}
			span.icon {
				margin-right: $standard-space;
			}
		}
	}
}

// Icons used in more than one tool so not restricted by a specific namespace.
.icon{
	@extend .fa;
	@extend .fa-fw;
	&.icon-calendar-academic-calendar				{	@extend .fa-graduation-cap}
	&.icon-calendar-activity						{	@extend .fa-rocket}
	&.icon-calendar-cancellation					{	@extend .fa-calendar-times-o}
	&.icon-calendar-class-section-discussion		{	@extend .fa-comments}
	&.icon-calendar-class-section-lab				{	@extend .fa-flask}
	&.icon-calendar-class-section-lecture			{	@extend .fa-book}
	&.icon-calendar-class-section-small-group		{	@extend .fa-users}
	&.icon-calendar-class-session					{	@extend .fa-bell}
	&.icon-calendar-computer-session				{	@extend .fa-desktop}
	&.icon-calendar-deadline						{	@extend .fa-hourglass-end}
	&.icon-calendar-exam							{	@extend .fa-check-square-o}
	&.icon-calendar-meeting							{	@extend .fa-clock-o}
	&.icon-calendar-multidisciplinary-conference	{	@extend .fa-cubes}
	&.icon-calendar-quiz							{	@extend .fa-star}
	&.icon-calendar-special-event					{	@extend .fa-certificate}
	&.icon-calendar-web-assignment					{	@extend .fa-code}
	&.icon-calendar-formative-assessment			{	@extend .fa-pencil-square-o}
	&.icon-calendar-submission-date					{	@extend .fa-hourglass-end}
	&.icon-calendar-tutorial						{	@extend .fa-graduation-cap}
	&.icon-calendar-workshop						{	@extend .fa-group}
	&.icon-calendar-attachment						{	@extend .fa-paperclip}
}
